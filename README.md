# 상견례 사진 투표 앱 💕

Next.js와 Supabase를 사용한 실시간 사진 투표 웹 앱입니다. 한국의 "상견례" (pre-wedding family meeting)에서 사용하기 위해 만들어졌습니다.

## 주요 기능

- 🎯 실시간 투표: Supabase Realtime을 사용한 실시간 투표 현황 표시
- 📱 모바일 친화적: 가족들이 스마트폰으로 쉽게 참여
- 🎨 따뜻한 디자인: 아이보리/베이지/골드 컬러의 따뜻한 UI
- 🏆 자동 승자 선택: 각 라운드에서 가장 많은 표를 받은 사진 자동 선택
- 📸 갤러리 모드: 최종 선택된 사진들을 갤러리와 슬라이드쇼로 확인

## 기술 스택

- **Next.js 14** (App Router, TypeScript)
- **Supabase** (PostgreSQL + Realtime)
- **Tailwind CSS**
- **React Hooks** (상태 관리)

## 설정

### 1. 의존성 설치

```bash
npm install
```

### 2. Supabase 프로젝트 생성

1. [Supabase](https://supabase.com)에서 새 프로젝트 생성
2. 프로젝트 설정에서 URL과 Anon Key 확인

### 3. 환경 변수 설정

`.env.local` 파일을 생성하고 다음 변수를 추가하세요:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 4. 데이터베이스 스키마 설정

1. Supabase 대시보드에서 SQL Editor 열기
2. `supabase/schema.sql` 파일의 내용을 복사하여 실행
3. Realtime이 활성화되었는지 확인 (Settings > API > Realtime)

### 5. 개발 서버 실행

```bash
npm run dev
```

브라우저에서 `http://localhost:3000` 열기

## 사용 방법

### 호스트 플로우

1. **방 생성**: `/host` 페이지에서 "방 만들기" 클릭
2. **사진 등록**: 이미지 URL을 입력하여 최대 30장의 사진 등록
   - 예: `https://example.com/photo1.jpg`
   - 또는 로컬 이미지를 `/public/uploads`에 업로드 후 URL 사용
3. **라운드 생성**: "라운드 생성하기" 버튼으로 사진들을 3장씩 그룹화
4. **호스트 화면 열기**: "호스트 화면 열기" 버튼으로 TV/아이패드에 표시할 화면 열기
5. **라운드 시작**: 각 라운드의 "시작" 버튼으로 라운드 시작
6. **라운드 종료**: 모든 가족이 투표하면 "라운드 종료" 버튼으로 다음 라운드로 이동
7. **결과 확인**: 모든 라운드 종료 후 결과 페이지에서 최종 갤러리 확인

### 참가자 플로우

1. **방 참여**: `/join` 페이지에서 호스트가 제공한 방 코드 입력
2. **가족 선택**: "신랑네", "신부네", "우리부부" 중 선택
3. **투표**: 각 라운드에서 3장의 사진 중 하나 선택
4. **완료**: "선택 완료 ✅" 메시지 확인

## 페이지 구조

- `/` - 홈페이지 (호스트/참가자 선택)
- `/host` - 호스트 관리 페이지 (방 생성, 사진 등록, 라운드 관리)
- `/join` - 참가자 참여 페이지 (방 코드 입력)
- `/room/[code]/vote` - 투표 페이지 (가족별 투표)
- `/room/[code]/host` - 호스트 뷰 페이지 (실시간 투표 현황)
- `/room/[code]/result` - 결과 페이지 (최종 갤러리)

## 데이터 모델

- **rooms**: 방 정보 (코드, 현재 라운드, 상태)
- **families**: 가족 정보 (신랑네, 신부네, 우리부부)
- **photos**: 사진 정보 (URL, 순서)
- **rounds**: 라운드 정보 (라운드 번호, 3장의 사진 ID, 승리 사진)
- **votes**: 투표 정보 (가족별 선택한 사진)

## 주의사항

- 현재는 인증 없이 익명 접근이 가능합니다 (RLS 정책이 모두 허용)
- 프로덕션 환경에서는 적절한 보안 정책을 설정하세요
- 이미지 URL은 외부에서 접근 가능한 공개 URL이어야 합니다
- Supabase Realtime이 활성화되어 있어야 실시간 기능이 작동합니다

## 문제 해결

- **Realtime이 작동하지 않음**: Supabase 대시보드에서 Realtime이 활성화되어 있는지 확인
- **방을 찾을 수 없음**: 방 코드가 정확한지 확인하고, 방이 생성된 후 사용하세요
- **투표가 반영되지 않음**: 브라우저 콘솔에서 에러 확인 및 Supabase 연결 상태 확인

